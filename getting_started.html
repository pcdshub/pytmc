

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; pytmc  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="User Guide" href="user_guide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pytmc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-usage">General Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#marking-the-twincat-project">Marking the TwinCAT project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-usage">Python Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#full-ioc-creation">Full IOC Creation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pragma_usage.html">Annotating a TwinCAT3 project</a></li>
<li class="toctree-l2"><a class="reference internal" href="terminal_usage.html">Command-line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="terminal_usage.html#templates">Templates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="source_code.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pytmc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="user_guide.html">User Guide</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-usage">
<h2>General Usage<a class="headerlink" href="#general-usage" title="Permalink to this headline">¶</a></h2>
<p>pytmc has various capabilities that can be accessed using the top-level <code class="docutils literal notranslate"><span class="pre">pytmc</span></code> program:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Generating EPICS database files (.db) based on a Beckhoff TwinCAT <code class="docutils literal notranslate"><span class="pre">.tmc</span></code> file (<code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">db</span></code>)</p></li>
<li><p>Introspecting <code class="docutils literal notranslate"><span class="pre">.tmc</span></code> files for their symbols and data types ( <code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">debug</span></code> and <code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">types</span></code>)</p></li>
<li><p>Generating full EPICS IOCs based on a provided template (<code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">iocboot</span></code> and <code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">stcmd</span></code>)</p></li>
<li><p>Parsing, introspecting, and summarizing full TwinCAT projects (<code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">summary</span></code>)</p></li>
<li><p>Outlining any TwinCAT XML file (<code class="docutils literal notranslate"><span class="pre">pytmc</span> <span class="pre">xmltranslate</span></code>)</p></li>
</ol>
</div></blockquote>
<p>In order for pytmc to work properly, the TwinCAT project and its
libraries require annotation. The resulting IOC depends upon EPICS ADS driver. This
driver is provided by the <a class="reference external" href="https://europeanspallationsource.se/">European Spallation Source</a> and is hosted on their <a class="reference external" href="https://bitbucket.org/europeanspallationsource/m-epics-twincat-ads">bitbucket page</a>.</p>
</div>
<div class="section" id="marking-the-twincat-project">
<h2>Marking the TwinCAT project<a class="headerlink" href="#marking-the-twincat-project" title="Permalink to this headline">¶</a></h2>
<p>Marking the TwinCAT project determines how the EPICS record will be generated.
The marking process uses custom attribute pragmas to designate variables for
pytmc to process. The pragma should be applied just above the declaration of
the variable you wish to mark. You can read more about the TwinCAT pragma
system <a class="reference external" href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/9007201784297355.html&amp;id=">here</a>.</p>
<p>Best practices for SLAC projects are documented in the <a class="reference external" href="https://confluence.slac.stanford.edu/display/PCDS/TwinCAT+3+Git+Setup+and+Best+Practices">PCDS confluence page</a>.</p>
<p>Having issues with multiline pragmas and related things? See the <a class="reference external" href="https://confluence.slac.stanford.edu/display/PCDS/Beckhoff+Flight+Rules">PCDS flight
rules</a>.</p>
</div>
<div class="section" id="python-usage">
<h2>Python Usage<a class="headerlink" href="#python-usage" title="Permalink to this headline">¶</a></h2>
<p>Once installed pytmc and its components can be imported into a python program
or shell like any normal python package. Consult the source code documentation
for specifics.</p>
</div>
<div class="section" id="full-ioc-creation">
<h2>Full IOC Creation<a class="headerlink" href="#full-ioc-creation" title="Permalink to this headline">¶</a></h2>
<p>PCDS has recently focused its efforts on <a class="reference external" href="https://github.com/pcdshub/ads-deploy">ads-deploy</a>, for seamless development and
deployment of IOCs directly from the TwinCAT IDE. Behind the scenes, ads-deploy
takes care of the following steps using a docker container:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/pcdshub/ads-ioc /path/to/ads-ioc
$ pytmc iocboot /path/to/plc.tsproj /path/to/ads-ioc/iocBoot/templates/
<span class="c1"># Creates directories: ioc-plc-name1, ioc-plc-name2, ...</span>
<span class="c1"># Creates Makefiles: ioc-plc-name/Makefile</span>

$ <span class="nb">cd</span> ioc-plc-name
$ vim Makefile
<span class="c1"># Customize - if necessary - to add more db files or change pytmc stcmd options</span>

$ make
<span class="c1"># Shells out to pytmc stcmd;</span>
<span class="c1"># Creates st.cmd, ioc-plc-name.db, envPaths</span>

$ ./st.cmd
<span class="c1"># Runs IOC</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="user_guide.html" class="btn btn-neutral float-left" title="User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, SLAC National Accelerator Laboratory

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>